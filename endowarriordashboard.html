<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>EndoFind Texas ‚Äî Find Your Excision Surgeon</title>
<link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,wght@0,400;0,600;0,700;1,400;1,600&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet"/>
<style>
:root{
  --nude1:#C49A8A;--nude2:#D9B5A6;--nude3:#EDD5CB;--nude4:#F7EDE8;--nude-dk:#9A6E62;
  --lav-lt:#EDE4F8;--lav-dk:#7A5EA0;--lavender:#C3A8D1;
  --mint-lt:#D4F4EC;--cream:#FBF6F2;--charcoal:#2D1E1A;--muted:#8A6E68;--border:#EDD5CB;--card:#FFF;
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
html{scroll-behavior:smooth;}
body{font-family:'DM Sans',sans-serif;background:var(--cream);color:var(--charcoal);min-height:100vh;}

/* TAB BAR */
.tab-bar{position:sticky;top:0;z-index:100;background:rgba(251,246,242,.93);backdrop-filter:blur(14px);border-bottom:1px solid var(--border);display:flex;justify-content:center;gap:.25rem;padding:.6rem 1rem;}
.tab-btn{background:none;border:none;font-family:'DM Sans',sans-serif;font-size:.88rem;font-weight:600;color:var(--muted);padding:.5rem 1.4rem;border-radius:99px;cursor:pointer;transition:background .2s,color .2s;}
.tab-btn:hover{background:var(--nude4);color:var(--nude-dk);}
.tab-btn.active{background:linear-gradient(135deg,#7A4E44,var(--nude1));color:#fff;}

/* HERO */
.hero{background:linear-gradient(145deg,#7A4E44 0%,var(--nude1) 42%,var(--nude2) 75%,var(--nude3) 100%);padding:4rem 1.5rem 5.5rem;text-align:center;position:relative;overflow:hidden;}
.hero::after{content:'';position:absolute;inset:0;pointer-events:none;mix-blend-mode:overlay;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.045'/%3E%3C/svg%3E");}
.hero-glow{position:absolute;inset:0;pointer-events:none;background:radial-gradient(ellipse at 75% 25%,rgba(255,238,220,.2) 0%,transparent 55%),radial-gradient(ellipse at 20% 80%,rgba(195,168,209,.16) 0%,transparent 50%);}
.lily-tl,.lily-tr{position:absolute;top:0;width:260px;height:260px;pointer-events:none;z-index:2;}
.lily-tl{left:-10px;}
.lily-tr{right:-10px;}
.hero-inner{position:relative;z-index:3;}
.hero-ribbon{display:inline-block;background:rgba(255,255,255,.18);border:1px solid rgba(255,255,255,.35);backdrop-filter:blur(6px);color:#fff;font-size:.78rem;font-weight:600;letter-spacing:.13em;text-transform:uppercase;padding:.35rem 1.1rem;border-radius:99px;margin-bottom:1.3rem;}
.hero h1{font-family:'Fraunces',serif;font-size:clamp(2rem,6vw,3.6rem);font-weight:700;color:#fff;line-height:1.15;margin-bottom:.9rem;text-shadow:0 2px 20px rgba(80,30,20,.22);}
.hero h1 em{font-style:italic;color:#FFE8DC;}
.hero p{color:rgba(255,255,255,.85);font-size:1.05rem;max-width:520px;margin:0 auto 2rem;line-height:1.7;}
.hero-stats{display:flex;justify-content:center;gap:1.5rem;flex-wrap:wrap;}
.stat{background:rgba(255,255,255,.14);border:1px solid rgba(255,255,255,.25);border-radius:14px;padding:.75rem 1.5rem;color:#fff;backdrop-filter:blur(4px);}
.stat strong{display:block;font-size:1.5rem;font-family:'Fraunces',serif;}
.stat span{font-size:.76rem;opacity:.8;text-transform:uppercase;letter-spacing:.09em;}
.wave{display:block;width:100%;height:56px;margin-top:-2px;background:var(--cream);clip-path:ellipse(56% 100% at 50% 100%);}

/* PAGES */
.page{display:none;}.page.active{display:block;}

/* FILTER CARD */
.filter-section{max-width:940px;margin:-2.5rem auto 2rem;padding:0 1.5rem;}
.filter-card{background:var(--card);border-radius:22px;box-shadow:0 8px 40px rgba(100,50,40,.1);padding:1.8rem 2rem;}
.filter-card h2{font-family:'Fraunces',serif;font-size:1.15rem;margin-bottom:1.2rem;}
.filters-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:.85rem;}
.filter-group label{display:block;font-size:.72rem;font-weight:600;letter-spacing:.08em;text-transform:uppercase;color:var(--muted);margin-bottom:.38rem;}
.filter-group select,.filter-group input[type=text],.filter-group input[type=number]{width:100%;padding:.6rem .85rem;border:1.5px solid var(--border);border-radius:10px;font-family:'DM Sans',sans-serif;font-size:.9rem;color:var(--charcoal);background:var(--nude4);outline:none;transition:border-color .2s;appearance:none;cursor:pointer;}
.filter-group input[type=text],.filter-group input[type=number]{cursor:text;}
.filter-group select:focus,.filter-group input:focus{border-color:var(--nude1);}
.select-wrap{position:relative;}
.select-wrap::after{content:'‚ñæ';position:absolute;right:.85rem;top:50%;transform:translateY(-50%);pointer-events:none;color:var(--muted);font-size:.8rem;}
.zip-row{display:flex;gap:.6rem;align-items:flex-end;flex-wrap:wrap;margin-top:.85rem;}
.zip-row .filter-group{flex:1;min-width:120px;}
.btn-locate{background:none;border:1.5px solid var(--border);border-radius:10px;padding:.6rem .9rem;font-size:.82rem;font-weight:600;color:var(--muted);cursor:pointer;white-space:nowrap;transition:border-color .2s,color .2s;font-family:'DM Sans',sans-serif;}
.btn-locate:hover{border-color:var(--nude1);color:var(--nude-dk);}
#zip-status{font-size:.75rem;color:var(--muted);margin-top:.3rem;}

/* SORT PANEL */
.sort-toggle-row{display:flex;align-items:center;gap:.6rem;margin-top:1rem;padding-top:.9rem;border-top:1px solid var(--border);}
.sort-toggle-btn{background:none;border:1.5px solid var(--border);border-radius:8px;padding:.38rem .85rem;font-size:.8rem;font-weight:600;color:var(--muted);cursor:pointer;display:flex;align-items:center;gap:.4rem;transition:border-color .2s,color .2s;font-family:'DM Sans',sans-serif;}
.sort-toggle-btn:hover,.sort-toggle-btn.open{border-color:var(--nude1);color:var(--nude-dk);}
.sort-panel{display:none;margin-top:.85rem;padding:.9rem 1rem;background:var(--nude4);border-radius:12px;border:1px solid var(--border);}
.sort-panel.visible{display:block;}
.sort-panel-label{font-size:.72rem;font-weight:700;letter-spacing:.08em;text-transform:uppercase;color:var(--muted);margin-bottom:.6rem;}
.sort-levels{display:flex;flex-direction:column;gap:.5rem;}
.sort-level{display:flex;align-items:center;gap:.5rem;animation:fadeUp .25s ease;}
.sort-level-num{font-size:.7rem;font-weight:700;color:var(--nude-dk);width:16px;flex-shrink:0;text-align:right;}
.sort-level select{flex:1;padding:.45rem .7rem;border:1.5px solid var(--border);border-radius:8px;font-family:'DM Sans',sans-serif;font-size:.83rem;background:#fff;color:var(--charcoal);outline:none;appearance:none;cursor:pointer;}
.sort-dir-btn{background:#fff;border:1.5px solid var(--border);border-radius:8px;padding:.42rem .65rem;font-size:.75rem;font-weight:700;cursor:pointer;color:var(--muted);transition:border-color .18s,color .18s;flex-shrink:0;font-family:'DM Sans',sans-serif;}
.sort-dir-btn:hover{border-color:var(--nude1);color:var(--nude-dk);}
.sort-level-up,.sort-level-down,.sort-level-del{background:none;border:none;cursor:pointer;color:var(--muted);font-size:.9rem;padding:.2rem;transition:color .15s;line-height:1;}
.sort-level-up:hover,.sort-level-down:hover{color:var(--nude-dk);}
.sort-level-del:hover{color:#B94A1A;}
.sort-add-btn{margin-top:.5rem;background:none;border:1.5px dashed var(--border);border-radius:8px;padding:.4rem .85rem;font-size:.78rem;font-weight:600;color:var(--muted);cursor:pointer;transition:border-color .18s,color .18s;font-family:'DM Sans',sans-serif;}
.sort-add-btn:hover{border-color:var(--nude1);color:var(--nude-dk);}

.filter-actions{display:flex;gap:.75rem;margin-top:1rem;align-items:center;flex-wrap:wrap;}
.btn-primary{background:linear-gradient(135deg,#7A4E44,var(--nude1));color:#fff;border:none;border-radius:10px;padding:.65rem 1.8rem;font-family:'DM Sans',sans-serif;font-size:.95rem;font-weight:600;cursor:pointer;transition:opacity .2s,transform .15s;}
.btn-primary:hover{opacity:.88;transform:translateY(-1px);}
.btn-ghost{background:none;border:1.5px solid var(--border);border-radius:10px;padding:.63rem 1.2rem;font-family:'DM Sans',sans-serif;font-size:.88rem;color:var(--muted);cursor:pointer;transition:border-color .2s,color .2s;}
.btn-ghost:hover{border-color:var(--nude1);color:var(--nude-dk);}
#result-count{margin-left:auto;font-size:.83rem;color:var(--muted);}

/* DOCTOR CARDS */
.results-section{max-width:940px;margin:0 auto 4rem;padding:0 1.5rem;}
.cards-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.25rem;}
.doctor-card{background:var(--card);border-radius:18px;border:1.5px solid var(--border);padding:1.5rem;display:flex;flex-direction:column;gap:.75rem;transition:box-shadow .22s,transform .22s;animation:fadeUp .4s ease both;}
.doctor-card:hover{box-shadow:0 14px 38px rgba(100,50,40,.12);transform:translateY(-3px);}
@keyframes fadeUp{from{opacity:0;transform:translateY(14px);}to{opacity:1;transform:translateY(0);}}
.card-header{display:flex;align-items:flex-start;gap:.9rem;}
.avatar{width:52px;height:52px;border-radius:50%;background:linear-gradient(135deg,var(--nude3),var(--lav-lt));display:flex;align-items:center;justify-content:center;font-family:'Fraunces',serif;font-size:1.2rem;color:var(--nude-dk);flex-shrink:0;font-weight:700;}
.doctor-name{font-family:'Fraunces',serif;font-size:1.05rem;font-weight:600;color:var(--charcoal);line-height:1.3;}
.doctor-credential{display:inline-block;background:var(--lav-lt);color:var(--lav-dk);font-size:.68rem;font-weight:600;letter-spacing:.07em;text-transform:uppercase;padding:.18rem .52rem;border-radius:6px;margin-top:.2rem;}
.doctor-org{font-size:.81rem;color:var(--muted);margin-top:.15rem;}
.info-row{display:flex;align-items:flex-start;gap:.5rem;font-size:.84rem;color:var(--muted);}
.info-row .icon{flex-shrink:0;margin-top:.05rem;}
.dist-badge{display:inline-block;background:linear-gradient(135deg,#7A4E44,var(--nude1));color:#fff;font-size:.72rem;font-weight:700;padding:.2rem .65rem;border-radius:99px;margin-left:.4rem;}
.tags{display:flex;flex-wrap:wrap;gap:.4rem;}
.tag{background:var(--nude4);color:var(--nude-dk);font-size:.71rem;font-weight:600;padding:.22rem .65rem;border-radius:99px;border:1px solid var(--border);}
.tag.mint{background:var(--mint-lt);color:#1E7A5A;border-color:#B0E8D6;}
.tag.lav{background:var(--lav-lt);color:var(--lav-dk);border-color:#D0B8E8;}
.review-block{background:var(--nude4);border-radius:10px;padding:.7rem .85rem;border:1px solid var(--border);}
.review-label{font-size:.7rem;font-weight:700;letter-spacing:.08em;text-transform:uppercase;color:var(--nude-dk);margin-bottom:.35rem;display:flex;align-items:center;gap:.35rem;}
.review-text{font-size:.8rem;color:var(--charcoal);line-height:1.55;font-style:italic;}
.review-sources{display:flex;flex-wrap:wrap;gap:.4rem;margin-top:.5rem;}
.review-link{font-size:.72rem;font-weight:600;color:var(--nude-dk);text-decoration:none;background:#fff;border:1px solid var(--border);padding:.18rem .55rem;border-radius:6px;transition:border-color .18s,color .18s;}
.review-link:hover{border-color:var(--nude1);color:#7A4E44;}
.stars{color:#D4956A;letter-spacing:1px;font-size:.78rem;}
.card-footer{margin-top:auto;padding-top:.55rem;border-top:1px solid var(--border);display:flex;gap:.6rem;flex-wrap:wrap;align-items:center;}
.btn-site{background:linear-gradient(135deg,#7A4E44,var(--nude1));color:#fff;text-decoration:none;font-size:.8rem;font-weight:600;padding:.44rem 1rem;border-radius:8px;transition:opacity .18s;}
.btn-site:hover{opacity:.85;}
.accepting-badge{display:inline-flex;align-items:center;gap:.3rem;font-size:.76rem;font-weight:600;padding:.38rem .8rem;border-radius:8px;background:var(--mint-lt);color:#1E7A5A;}
.accepting-badge.no{background:#FDE8D4;color:#A04020;}
.empty{text-align:center;padding:4rem 1rem;color:var(--muted);display:none;}
.empty-icon{font-size:3rem;margin-bottom:1rem;}
.empty h3{font-family:'Fraunces',serif;font-size:1.3rem;color:var(--charcoal);margin-bottom:.5rem;}

/* NEWS */
.news-page{max-width:940px;margin:2.5rem auto 4rem;padding:0 1.5rem;}
.news-intro{text-align:center;margin-bottom:2.5rem;}
.news-intro h2{font-family:'Fraunces',serif;font-size:2rem;font-weight:700;margin-bottom:.5rem;}
.news-intro p{color:var(--muted);font-size:.95rem;}
.news-cats{display:flex;gap:.6rem;flex-wrap:wrap;justify-content:center;margin-bottom:2.5rem;}
.cat-pill{padding:.5rem 1.2rem;border-radius:99px;border:1.5px solid var(--border);font-size:.83rem;font-weight:600;cursor:pointer;transition:background .2s,color .2s,border-color .2s;background:var(--card);color:var(--muted);}
.cat-pill:hover{border-color:var(--nude1);color:var(--nude-dk);}
.cat-pill.active{background:linear-gradient(135deg,#7A4E44,var(--nude1));color:#fff;border-color:transparent;}
.news-section{margin-bottom:3rem;}
.news-section-header{display:flex;align-items:center;gap:.75rem;margin-bottom:1.25rem;padding-bottom:.75rem;border-bottom:2px solid var(--border);}
.news-section-icon{width:40px;height:40px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.2rem;flex-shrink:0;}
.news-section-header h3{font-family:'Fraunces',serif;font-size:1.25rem;color:var(--charcoal);}
.news-refresh{margin-left:auto;background:none;border:1.5px solid var(--border);border-radius:8px;padding:.3rem .75rem;font-size:.78rem;font-weight:600;color:var(--muted);cursor:pointer;display:flex;align-items:center;gap:.35rem;transition:border-color .2s,color .2s;font-family:'DM Sans',sans-serif;}
.news-refresh:hover{border-color:var(--nude1);color:var(--nude-dk);}
.news-refresh.spinning .spin-icon{display:inline-block;animation:spin .8s linear infinite;}
@keyframes spin{to{transform:rotate(360deg);}}
.news-cards{display:flex;flex-direction:column;gap:.85rem;}
.news-card{background:var(--card);border:1.5px solid var(--border);border-radius:14px;padding:1.1rem 1.3rem;display:flex;gap:1rem;align-items:flex-start;transition:box-shadow .2s,transform .2s;animation:fadeUp .35s ease both;}
.news-card:hover{box-shadow:0 8px 28px rgba(100,50,40,.09);transform:translateY(-2px);}
.news-card-emoji{font-size:1.4rem;flex-shrink:0;margin-top:.1rem;}
.news-card-body{flex:1;min-width:0;}
.news-card-title{font-family:'Fraunces',serif;font-size:.96rem;font-weight:600;color:var(--charcoal);margin-bottom:.28rem;line-height:1.4;}
.news-card-title a{color:inherit;text-decoration:none;}
.news-card-title a:hover{color:var(--nude-dk);}
.news-card-summary{font-size:.82rem;color:var(--muted);line-height:1.6;}
.news-card-meta{display:flex;gap:.65rem;align-items:center;margin-top:.5rem;flex-wrap:wrap;}
.news-card-source{font-size:.72rem;font-weight:700;color:var(--nude-dk);background:var(--nude4);padding:.16rem .52rem;border-radius:6px;}
.news-card-date{font-size:.72rem;color:var(--muted);}
.skeleton{background:linear-gradient(90deg,var(--nude4) 25%,var(--nude3) 50%,var(--nude4) 75%);background-size:200% 100%;animation:shimmer 1.4s infinite;border-radius:8px;height:13px;margin-bottom:.5rem;}
@keyframes shimmer{to{background-position:-200% 0;}}
.skel-card{background:var(--card);border:1.5px solid var(--border);border-radius:14px;padding:1.1rem 1.3rem;margin-bottom:.85rem;}

/* DISCLAIMER / FOOTER */
.disclaimer{max-width:940px;margin:0 auto 3rem;padding:0 1.5rem;}
.disclaimer-box{background:var(--lav-lt);border-left:4px solid var(--lavender);border-radius:10px;padding:1rem 1.3rem;font-size:.82rem;color:#5A3E80;line-height:1.65;}
.disclaimer-box strong{display:block;margin-bottom:.3rem;}
footer{text-align:center;padding:2rem 1rem 3rem;font-size:.82rem;color:var(--muted);border-top:1px solid var(--border);}
footer a{color:var(--nude-dk);text-decoration:none;}
footer a:hover{text-decoration:underline;}
@media(max-width:600px){.lily-tl,.lily-tr{width:160px;height:160px;}.tab-btn{padding:.45rem .85rem;font-size:.8rem;}.filter-card{padding:1.2rem;}.filters-grid{grid-template-columns:1fr 1fr;}}
</style>
</head>
<body>

<!-- TAB BAR -->
<nav class="tab-bar">
  <button class="tab-btn active" onclick="switchTab('find',this)">üîç Find a Surgeon</button>
  <button class="tab-btn" onclick="switchTab('news',this)">üì∞ News</button>
</nav>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     HERO  with Stargazer Lily SVGs
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<header class="hero">

<!-- LEFT LILY ‚Äî stargazer style, pink spotted -->
<svg class="lily-tl" viewBox="0 0 260 260" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
<defs>
  <!-- petal: white core ‚Üí blush ‚Üí vivid pink tip -->
  <radialGradient id="L-pg1" cx="48%" cy="92%" r="80%" gradientUnits="objectBoundingBox">
    <stop offset="0%" stop-color="#fff8f6"/>
    <stop offset="30%" stop-color="#f9ccd5"/>
    <stop offset="70%" stop-color="#f0849a"/>
    <stop offset="100%" stop-color="#e05878"/>
  </radialGradient>
  <radialGradient id="L-pg2" cx="48%" cy="92%" r="80%" gradientUnits="objectBoundingBox">
    <stop offset="0%" stop-color="#fff4f2"/>
    <stop offset="30%" stop-color="#f5bec8"/>
    <stop offset="70%" stop-color="#ec7d95"/>
    <stop offset="100%" stop-color="#d94e70"/>
  </radialGradient>
  <!-- leaf -->
  <linearGradient id="L-leaf" x1="0" y1="0" x2="1" y2="1">
    <stop offset="0%" stop-color="#5a9e52"/>
    <stop offset="100%" stop-color="#3d7438"/>
  </linearGradient>
  <!-- stamen -->
  <linearGradient id="L-anth" x1="0" y1="0" x2="0" y2="1">
    <stop offset="0%" stop-color="#d4820a"/>
    <stop offset="100%" stop-color="#a85e05"/>
  </linearGradient>
</defs>

<!-- === MAIN BLOOM (center ~105,145) === -->
<!-- Back petals (3) - slightly offset rotation -->
<g opacity="0.85">
  <!-- BP1 -->
  <path d="M105,145 C98,128 88,105 82,82 C78,65 80,50 88,44 C96,40 105,48 108,65 C112,85 112,115 108,145Z"
    fill="url(#L-pg2)" stroke="#e06888" stroke-width="0.6"/>
  <!-- BP2 -->
  <path d="M105,145 C118,134 135,120 152,110 C165,102 178,102 183,110 C187,118 182,130 170,136 C155,144 132,146 105,145Z"
    fill="url(#L-pg2)" stroke="#e06888" stroke-width="0.6"/>
  <!-- BP3 -->
  <path d="M105,145 C94,158 80,175 68,192 C58,206 54,218 60,224 C67,230 78,224 88,212 C100,196 108,172 105,145Z"
    fill="url(#L-pg2)" stroke="#e06888" stroke-width="0.6"/>
</g>
<!-- Front petals (3) -->
<!-- FP1 - upper left -->
<path d="M105,145 C96,126 82,100 72,76 C64,56 64,40 74,34 C83,29 94,38 100,58 C108,82 110,118 105,145Z"
  fill="url(#L-pg1)" stroke="#c85070" stroke-width="0.7"/>
<!-- midrib vein -->
<path d="M105,145 C100,128 90,105 84,80 C80,60 78,42 84,35" stroke="#e07088" stroke-width="1" fill="none" opacity="0.5"/>
<!-- spots on FP1 -->
<ellipse cx="92" cy="90" rx="2.5" ry="1.8" fill="#c04060" opacity="0.55" transform="rotate(-15,92,90)"/>
<ellipse cx="88" cy="102" rx="2" ry="1.5" fill="#c04060" opacity="0.5" transform="rotate(-10,88,102)"/>
<ellipse cx="96" cy="80" rx="1.8" ry="1.3" fill="#c04060" opacity="0.45"/>
<ellipse cx="86" cy="115" rx="1.5" ry="1.2" fill="#c04060" opacity="0.4"/>
<circle cx="100" cy="70" r="1.2" fill="#c04060" opacity="0.4"/>

<!-- FP2 - right -->
<path d="M105,145 C122,140 144,130 164,122 C180,116 194,116 198,124 C202,132 196,146 180,153 C162,161 136,160 105,145Z"
  fill="url(#L-pg1)" stroke="#c85070" stroke-width="0.7"/>
<path d="M105,145 C118,141 138,132 158,124 C174,118 190,118 196,126" stroke="#e07088" stroke-width="1" fill="none" opacity="0.5"/>
<!-- spots FP2 -->
<ellipse cx="148" cy="128" rx="2.5" ry="1.8" fill="#c04060" opacity="0.55" transform="rotate(15,148,128)"/>
<ellipse cx="162" cy="124" rx="2" ry="1.5" fill="#c04060" opacity="0.5"/>
<ellipse cx="136" cy="134" rx="1.8" ry="1.3" fill="#c04060" opacity="0.45"/>
<circle cx="170" cy="122" r="1.2" fill="#c04060" opacity="0.4"/>

<!-- FP3 - lower left -->
<path d="M105,145 C96,162 84,182 72,200 C62,215 55,228 62,234 C70,240 84,232 96,216 C110,198 114,170 105,145Z"
  fill="url(#L-pg1)" stroke="#c85070" stroke-width="0.7"/>
<path d="M105,145 C98,160 86,178 76,196 C66,210 58,226 64,233" stroke="#e07088" stroke-width="1" fill="none" opacity="0.5"/>
<!-- spots FP3 -->
<ellipse cx="88" cy="180" rx="2.5" ry="1.8" fill="#c04060" opacity="0.5" transform="rotate(10,88,180)"/>
<ellipse cx="80" cy="195" rx="2" ry="1.5" fill="#c04060" opacity="0.45"/>
<ellipse cx="94" cy="168" rx="1.8" ry="1.3" fill="#c04060" opacity="0.4"/>

<!-- center glow -->
<ellipse cx="105" cy="145" rx="12" ry="10" fill="#fff5ee" opacity="0.7"/>

<!-- STAMENS (6) -->
<g stroke="rgba(200,165,90,0.85)" stroke-width="1.2" stroke-linecap="round">
  <line x1="105" y1="145" x2="96" y2="122"/>
  <line x1="105" y1="145" x2="112" y2="118"/>
  <line x1="105" y1="145" x2="124" y2="130"/>
  <line x1="105" y1="145" x2="120" y2="152"/>
  <line x1="105" y1="145" x2="97" y2="162"/>
  <line x1="105" y1="145" x2="85" y2="155"/>
</g>
<!-- anthers -->
<ellipse cx="94" cy="120" rx="4" ry="2" fill="url(#L-anth)" transform="rotate(-30,94,120)"/>
<ellipse cx="114" cy="116" rx="4" ry="2" fill="url(#L-anth)" transform="rotate(20,114,116)"/>
<ellipse cx="126" cy="128" rx="4" ry="2" fill="url(#L-anth)" transform="rotate(45,126,128)"/>
<ellipse cx="122" cy="154" rx="4" ry="2" fill="url(#L-anth)" transform="rotate(80,122,154)"/>
<ellipse cx="95" cy="165" rx="4" ry="2" fill="url(#L-anth)" transform="rotate(-60,95,165)"/>
<ellipse cx="83" cy="157" rx="4" ry="2" fill="url(#L-anth)" transform="rotate(-40,83,157)"/>
<!-- pollen dust -->
<circle cx="90" cy="124" r="1.2" fill="#c8820a" opacity="0.7"/>
<circle cx="118" cy="119" r="1" fill="#c8820a" opacity="0.65"/>
<circle cx="128" cy="132" r="1.1" fill="#c8820a" opacity="0.6"/>

<!-- === SECOND BLOOM (smaller, upper right ~165,75) === -->
<g transform="rotate(-25,165,75)">
  <!-- back petals -->
  <path d="M165,75 C160,62 156,46 157,34 C158,24 163,18 168,19 C173,21 176,28 175,40 C174,54 170,68 165,75Z"
    fill="url(#L-pg2)" stroke="#e06888" stroke-width="0.5" opacity="0.82"/>
  <path d="M165,75 C175,68 186,60 196,56 C204,52 210,54 211,60 C212,66 206,73 197,77 C186,81 175,79 165,75Z"
    fill="url(#L-pg2)" stroke="#e06888" stroke-width="0.5" opacity="0.82"/>
  <!-- front petals -->
  <path d="M165,75 C158,60 152,42 152,28 C152,18 157,11 163,12 C168,14 172,22 172,36 C172,52 168,66 165,75Z"
    fill="url(#L-pg1)" stroke="#c85070" stroke-width="0.6"/>
  <path d="M165,75 C178,70 192,63 204,59 C213,56 220,58 220,65 C220,72 213,80 202,83 C189,87 176,82 165,75Z"
    fill="url(#L-pg1)" stroke="#c85070" stroke-width="0.6"/>
  <path d="M165,75 C158,86 150,98 142,106 C136,113 128,116 124,112 C120,108 122,100 130,94 C140,87 154,82 165,75Z"
    fill="url(#L-pg1)" stroke="#c85070" stroke-width="0.6"/>
  <!-- spots on second bloom -->
  <ellipse cx="162" cy="44" rx="2" ry="1.5" fill="#c04060" opacity="0.5"/>
  <ellipse cx="183" cy="66" rx="1.8" ry="1.3" fill="#c04060" opacity="0.45"/>
  <ellipse cx="152" cy="90" rx="1.6" ry="1.2" fill="#c04060" opacity="0.4"/>
  <!-- center + stamens -->
  <ellipse cx="165" cy="75" rx="8" ry="7" fill="#fff5ee" opacity="0.65"/>
  <g stroke="rgba(200,165,90,0.8)" stroke-width="1" stroke-linecap="round">
    <line x1="165" y1="75" x2="162" y2="60"/>
    <line x1="165" y1="75" x2="172" y2="58"/>
    <line x1="165" y1="75" x2="178" y2="68"/>
    <line x1="165" y1="75" x2="175" y2="84"/>
    <line x1="165" y1="75" x2="158" y2="86"/>
  </g>
  <ellipse cx="161" cy="58" rx="3.2" ry="1.6" fill="url(#L-anth)" transform="rotate(-15,161,58)"/>
  <ellipse cx="173" cy="56" rx="3.2" ry="1.6" fill="url(#L-anth)" transform="rotate(20,173,56)"/>
  <ellipse cx="180" cy="67" rx="3.2" ry="1.6" fill="url(#L-anth)" transform="rotate(45,180,67)"/>
  <ellipse cx="177" cy="85" rx="3.2" ry="1.6" fill="url(#L-anth)" transform="rotate(75,177,85)"/>
  <ellipse cx="157" cy="87" rx="3.2" ry="1.6" fill="url(#L-anth)" transform="rotate(-50,157,87)"/>
</g>

<!-- === BUD (upper area) === -->
<path d="M148,30 C142,22 138,14 140,8 C142,3 148,1 153,5 C158,10 160,20 155,30Z"
  fill="#f5b8c8" stroke="#d87090" stroke-width="0.8"/>
<path d="M148,30 C154,22 158,15 156,8 C154,3 149,1 145,5" fill="none" stroke="#e09080" stroke-width="0.6"/>
<!-- sepals on bud -->
<path d="M148,30 C144,26 138,24 134,28 C138,28 144,30 148,30Z" fill="#5a9e52" opacity="0.7"/>
<path d="M148,30 C152,26 158,24 162,28 C158,28 152,30 148,30Z" fill="#4a8e44" opacity="0.65"/>

<!-- === STEM & LEAVES === -->
<!-- main stem -->
<path d="M105,145 C100,170 90,200 75,230 C65,250 50,262 35,265"
  stroke="#4a8e44" stroke-width="3.5" fill="none" stroke-linecap="round"/>
<!-- stem to second bloom -->
<path d="M105,145 C120,130 138,110 155,90 C160,84 163,78 165,75"
  stroke="#4a8e44" stroke-width="2.5" fill="none" stroke-linecap="round"/>
<!-- stem to bud -->
<path d="M155,90 C151,70 150,50 150,32 C150,32 149,31 148,30"
  stroke="#5a9e52" stroke-width="1.8" fill="none" stroke-linecap="round"/>

<!-- LEAF 1 (lower left) -->
<path d="M90,195 C75,180 55,172 40,178 C55,178 72,186 90,195Z" fill="url(#L-leaf)" stroke="#3d7438" stroke-width="0.6"/>
<path d="M90,195 C85,208 75,218 62,222 C72,215 83,207 90,195Z" fill="#4d8e42" stroke="#3d7438" stroke-width="0.6"/>
<line x1="90" y1="195" x2="46" y2="180" stroke="#3a6e34" stroke-width="0.8" opacity="0.6"/>

<!-- LEAF 2 (mid) -->
<path d="M100,165 C82,156 62,156 48,165 C63,160 83,160 100,165Z" fill="url(#L-leaf)" stroke="#3d7438" stroke-width="0.6"/>
<path d="M100,165 C92,175 80,182 66,183 C78,178 92,172 100,165Z" fill="#4d8e42" stroke="#3d7438" stroke-width="0.6"/>
<line x1="100" y1="165" x2="50" y2="165" stroke="#3a6e34" stroke-width="0.8" opacity="0.6"/>

<!-- LEAF 3 (upper on second stem) -->
<path d="M135,115 C122,106 108,106 98,114 C110,110 124,110 135,115Z" fill="url(#L-leaf)" stroke="#3d7438" stroke-width="0.6"/>
<path d="M135,115 C130,124 122,130 110,132 C120,126 130,120 135,115Z" fill="#4d8e42" stroke="#3d7438" stroke-width="0.6"/>
</svg>

<!-- RIGHT LILY ‚Äî mirrored version -->
<svg class="lily-tr" viewBox="0 0 260 260" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
<defs>
  <radialGradient id="R-pg1" cx="52%" cy="92%" r="80%" gradientUnits="objectBoundingBox">
    <stop offset="0%" stop-color="#fff8f6"/>
    <stop offset="30%" stop-color="#f9ccd5"/>
    <stop offset="70%" stop-color="#f0849a"/>
    <stop offset="100%" stop-color="#e05878"/>
  </radialGradient>
  <radialGradient id="R-pg2" cx="52%" cy="92%" r="80%" gradientUnits="objectBoundingBox">
    <stop offset="0%" stop-color="#fff4f2"/>
    <stop offset="30%" stop-color="#f5bec8"/>
    <stop offset="70%" stop-color="#ec7d95"/>
    <stop offset="100%" stop-color="#d94e70"/>
  </radialGradient>
  <linearGradient id="R-leaf" x1="1" y1="0" x2="0" y2="1">
    <stop offset="0%" stop-color="#5a9e52"/>
    <stop offset="100%" stop-color="#3d7438"/>
  </linearGradient>
  <linearGradient id="R-anth" x1="0" y1="0" x2="0" y2="1">
    <stop offset="0%" stop-color="#d4820a"/>
    <stop offset="100%" stop-color="#a85e05"/>
  </linearGradient>
</defs>
<g transform="translate(260,0) scale(-1,1)">
<!-- MAIN BLOOM -->
<g opacity="0.85">
  <path d="M105,145 C98,128 88,105 82,82 C78,65 80,50 88,44 C96,40 105,48 108,65 C112,85 112,115 108,145Z" fill="url(#R-pg2)" stroke="#e06888" stroke-width="0.6"/>
  <path d="M105,145 C118,134 135,120 152,110 C165,102 178,102 183,110 C187,118 182,130 170,136 C155,144 132,146 105,145Z" fill="url(#R-pg2)" stroke="#e06888" stroke-width="0.6"/>
  <path d="M105,145 C94,158 80,175 68,192 C58,206 54,218 60,224 C67,230 78,224 88,212 C100,196 108,172 105,145Z" fill="url(#R-pg2)" stroke="#e06888" stroke-width="0.6"/>
</g>
<path d="M105,145 C96,126 82,100 72,76 C64,56 64,40 74,34 C83,29 94,38 100,58 C108,82 110,118 105,145Z" fill="url(#R-pg1)" stroke="#c85070" stroke-width="0.7"/>
<path d="M105,145 C100,128 90,105 84,80 C80,60 78,42 84,35" stroke="#e07088" stroke-width="1" fill="none" opacity="0.5"/>
<ellipse cx="92" cy="90" rx="2.5" ry="1.8" fill="#c04060" opacity="0.55" transform="rotate(-15,92,90)"/>
<ellipse cx="88" cy="102" rx="2" ry="1.5" fill="#c04060" opacity="0.5"/>
<ellipse cx="96" cy="80" rx="1.8" ry="1.3" fill="#c04060" opacity="0.45"/>
<ellipse cx="86" cy="115" rx="1.5" ry="1.2" fill="#c04060" opacity="0.4"/>
<circle cx="100" cy="70" r="1.2" fill="#c04060" opacity="0.4"/>
<path d="M105,145 C122,140 144,130 164,122 C180,116 194,116 198,124 C202,132 196,146 180,153 C162,161 136,160 105,145Z" fill="url(#R-pg1)" stroke="#c85070" stroke-width="0.7"/>
<path d="M105,145 C118,141 138,132 158,124 C174,118 190,118 196,126" stroke="#e07088" stroke-width="1" fill="none" opacity="0.5"/>
<ellipse cx="148" cy="128" rx="2.5" ry="1.8" fill="#c04060" opacity="0.55" transform="rotate(15,148,128)"/>
<ellipse cx="162" cy="124" rx="2" ry="1.5" fill="#c04060" opacity="0.5"/>
<ellipse cx="136" cy="134" rx="1.8" ry="1.3" fill="#c04060" opacity="0.45"/>
<path d="M105,145 C96,162 84,182 72,200 C62,215 55,228 62,234 C70,240 84,232 96,216 C110,198 114,170 105,145Z" fill="url(#R-pg1)" stroke="#c85070" stroke-width="0.7"/>
<ellipse cx="88" cy="180" rx="2.5" ry="1.8" fill="#c04060" opacity="0.5" transform="rotate(10,88,180)"/>
<ellipse cx="80" cy="195" rx="2" ry="1.5" fill="#c04060" opacity="0.45"/>
<ellipse cx="94" cy="168" rx="1.8" ry="1.3" fill="#c04060" opacity="0.4"/>
<ellipse cx="105" cy="145" rx="12" ry="10" fill="#fff5ee" opacity="0.7"/>
<g stroke="rgba(200,165,90,0.85)" stroke-width="1.2" stroke-linecap="round">
  <line x1="105" y1="145" x2="96" y2="122"/>
  <line x1="105" y1="145" x2="112" y2="118"/>
  <line x1="105" y1="145" x2="124" y2="130"/>
  <line x1="105" y1="145" x2="120" y2="152"/>
  <line x1="105" y1="145" x2="97" y2="162"/>
  <line x1="105" y1="145" x2="85" y2="155"/>
</g>
<ellipse cx="94" cy="120" rx="4" ry="2" fill="url(#R-anth)" transform="rotate(-30,94,120)"/>
<ellipse cx="114" cy="116" rx="4" ry="2" fill="url(#R-anth)" transform="rotate(20,114,116)"/>
<ellipse cx="126" cy="128" rx="4" ry="2" fill="url(#R-anth)" transform="rotate(45,126,128)"/>
<ellipse cx="122" cy="154" rx="4" ry="2" fill="url(#R-anth)" transform="rotate(80,122,154)"/>
<ellipse cx="95" cy="165" rx="4" ry="2" fill="url(#R-anth)" transform="rotate(-60,95,165)"/>
<ellipse cx="83" cy="157" rx="4" ry="2" fill="url(#R-anth)" transform="rotate(-40,83,157)"/>

<!-- SECOND BLOOM -->
<g transform="rotate(-25,165,75)">
  <path d="M165,75 C160,62 156,46 157,34 C158,24 163,18 168,19 C173,21 176,28 175,40 C174,54 170,68 165,75Z" fill="url(#R-pg2)" stroke="#e06888" stroke-width="0.5" opacity="0.82"/>
  <path d="M165,75 C175,68 186,60 196,56 C204,52 210,54 211,60 C212,66 206,73 197,77 C186,81 175,79 165,75Z" fill="url(#R-pg2)" stroke="#e06888" stroke-width="0.5" opacity="0.82"/>
  <path d="M165,75 C158,60 152,42 152,28 C152,18 157,11 163,12 C168,14 172,22 172,36 C172,52 168,66 165,75Z" fill="url(#R-pg1)" stroke="#c85070" stroke-width="0.6"/>
  <path d="M165,75 C178,70 192,63 204,59 C213,56 220,58 220,65 C220,72 213,80 202,83 C189,87 176,82 165,75Z" fill="url(#R-pg1)" stroke="#c85070" stroke-width="0.6"/>
  <path d="M165,75 C158,86 150,98 142,106 C136,113 128,116 124,112 C120,108 122,100 130,94 C140,87 154,82 165,75Z" fill="url(#R-pg1)" stroke="#c85070" stroke-width="0.6"/>
  <ellipse cx="162" cy="44" rx="2" ry="1.5" fill="#c04060" opacity="0.5"/>
  <ellipse cx="183" cy="66" rx="1.8" ry="1.3" fill="#c04060" opacity="0.45"/>
  <ellipse cx="152" cy="90" rx="1.6" ry="1.2" fill="#c04060" opacity="0.4"/>
  <ellipse cx="165" cy="75" rx="8" ry="7" fill="#fff5ee" opacity="0.65"/>
  <g stroke="rgba(200,165,90,0.8)" stroke-width="1" stroke-linecap="round">
    <line x1="165" y1="75" x2="162" y2="60"/>
    <line x1="165" y1="75" x2="172" y2="58"/>
    <line x1="165" y1="75" x2="178" y2="68"/>
    <line x1="165" y1="75" x2="175" y2="84"/>
    <line x1="165" y1="75" x2="158" y2="86"/>
  </g>
  <ellipse cx="161" cy="58" rx="3.2" ry="1.6" fill="url(#R-anth)" transform="rotate(-15,161,58)"/>
  <ellipse cx="173" cy="56" rx="3.2" ry="1.6" fill="url(#R-anth)" transform="rotate(20,173,56)"/>
  <ellipse cx="180" cy="67" rx="3.2" ry="1.6" fill="url(#R-anth)" transform="rotate(45,180,67)"/>
  <ellipse cx="177" cy="85" rx="3.2" ry="1.6" fill="url(#R-anth)" transform="rotate(75,177,85)"/>
  <ellipse cx="157" cy="87" rx="3.2" ry="1.6" fill="url(#R-anth)" transform="rotate(-50,157,87)"/>
</g>

<!-- BUD -->
<path d="M148,30 C142,22 138,14 140,8 C142,3 148,1 153,5 C158,10 160,20 155,30Z" fill="#f5b8c8" stroke="#d87090" stroke-width="0.8"/>
<path d="M148,30 C154,22 158,15 156,8 C154,3 149,1 145,5" fill="none" stroke="#e09080" stroke-width="0.6"/>
<path d="M148,30 C144,26 138,24 134,28 C138,28 144,30 148,30Z" fill="#5a9e52" opacity="0.7"/>
<path d="M148,30 C152,26 158,24 162,28 C158,28 152,30 148,30Z" fill="#4a8e44" opacity="0.65"/>

<!-- STEMS & LEAVES -->
<path d="M105,145 C100,170 90,200 75,230 C65,250 50,262 35,265" stroke="#4a8e44" stroke-width="3.5" fill="none" stroke-linecap="round"/>
<path d="M105,145 C120,130 138,110 155,90 C160,84 163,78 165,75" stroke="#4a8e44" stroke-width="2.5" fill="none" stroke-linecap="round"/>
<path d="M155,90 C151,70 150,50 150,32 C150,32 149,31 148,30" stroke="#5a9e52" stroke-width="1.8" fill="none" stroke-linecap="round"/>
<path d="M90,195 C75,180 55,172 40,178 C55,178 72,186 90,195Z" fill="url(#R-leaf)" stroke="#3d7438" stroke-width="0.6"/>
<path d="M90,195 C85,208 75,218 62,222 C72,215 83,207 90,195Z" fill="#4d8e42" stroke="#3d7438" stroke-width="0.6"/>
<line x1="90" y1="195" x2="46" y2="180" stroke="#3a6e34" stroke-width="0.8" opacity="0.6"/>
<path d="M100,165 C82,156 62,156 48,165 C63,160 83,160 100,165Z" fill="url(#R-leaf)" stroke="#3d7438" stroke-width="0.6"/>
<path d="M100,165 C92,175 80,182 66,183 C78,178 92,172 100,165Z" fill="#4d8e42" stroke="#3d7438" stroke-width="0.6"/>
<line x1="100" y1="165" x2="50" y2="165" stroke="#3a6e34" stroke-width="0.8" opacity="0.6"/>
<path d="M135,115 C122,106 108,106 98,114 C110,110 124,110 135,115Z" fill="url(#R-leaf)" stroke="#3d7438" stroke-width="0.6"/>
<path d="M135,115 C130,124 122,130 110,132 C120,126 130,120 135,115Z" fill="#4d8e42" stroke="#3d7438" stroke-width="0.6"/>
</g>
</svg>

  <div class="hero-glow"></div>
  <div class="hero-inner">
    <div class="hero-ribbon">üå∏ Endometriosis Excision Surgeon Finder</div>
    <h1>Find Your <em>Excision</em> Surgeon<br>in Texas</h1>
    <p>Laparoscopic excision is the gold-standard treatment for endometriosis. These surgeons specialize in complete excision ‚Äî not just ablation.</p>
    <div class="hero-stats">
      <div class="stat"><strong>13+</strong><span>Verified Surgeons</span></div>
      <div class="stat"><strong>Texas</strong><span>DFW ¬∑ Houston ¬∑ Austin</span></div>
      <div class="stat"><strong>Free</strong><span>No sign-up needed</span></div>
    </div>
  </div>
</header>
<div class="wave"></div>

<!-- ‚ïê‚ïê‚ïê FIND PAGE ‚ïê‚ïê‚ïê -->
<div id="page-find" class="page active">
<section class="filter-section">
  <div class="filter-card">
    <h2>üîç Filter &amp; Sort Surgeons</h2>

    <!-- Standard filters -->
    <div class="filters-grid">
      <div class="filter-group">
        <label>City / Region</label>
        <div class="select-wrap">
          <select id="filter-city">
            <option value="">All Texas</option>
            <option value="Dallas">Dallas</option>
            <option value="Fort Worth">Fort Worth</option>
            <option value="Houston">Houston</option>
            <option value="Austin">Austin</option>
          </select>
        </div>
      </div>
      <div class="filter-group">
        <label>Credential</label>
        <div class="select-wrap">
          <select id="filter-cred">
            <option value="">Any Credential</option>
            <option value="MD">MD</option>
            <option value="DO">DO</option>
            <option value="FACOG">FACOG</option>
            <option value="PhD">PhD</option>
          </select>
        </div>
      </div>
      <div class="filter-group">
        <label>Specialization</label>
        <div class="select-wrap">
          <select id="filter-spec">
            <option value="">Any Focus</option>
            <option value="Excision Surgery">Excision Surgery</option>
            <option value="Robotic Surgery">Robotic Surgery</option>
            <option value="Fertility Preservation">Fertility Preservation</option>
            <option value="Adolescent Endo">Adolescent Endo</option>
          </select>
        </div>
      </div>
      <div class="filter-group">
        <label>Accepting Patients</label>
        <div class="select-wrap">
          <select id="filter-accepting">
            <option value="">Any Status</option>
            <option value="true">Yes ‚Äî Accepting</option>
            <option value="false">No ‚Äî Waitlist/Closed</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Zip + Distance -->
    <div class="zip-row">
      <div class="filter-group">
        <label>Your ZIP Code</label>
        <input type="text" id="filter-zip" placeholder="e.g. 75201" maxlength="5" oninput="this.value=this.value.replace(/\D/g,'')"/>
      </div>
      <div class="filter-group">
        <label>Max Distance</label>
        <div class="select-wrap">
          <select id="filter-dist">
            <option value="">Any distance</option>
            <option value="25">Within 25 mi</option>
            <option value="50">Within 50 mi</option>
            <option value="100">Within 100 mi</option>
            <option value="200">Within 200 mi</option>
          </select>
        </div>
      </div>
      <button class="btn-locate" onclick="useMyLocation()">üìç Use my location</button>
    </div>
    <div id="zip-status"></div>

    <!-- Multi-level Sort -->
    <div class="sort-toggle-row">
      <button class="sort-toggle-btn" id="sort-toggle" onclick="toggleSortPanel()">‚áÖ Sort Options</button>
      <span id="sort-summary" style="font-size:.78rem;color:var(--muted);"></span>
    </div>
    <div class="sort-panel" id="sort-panel">
      <div class="sort-panel-label">Sort priority (drag level to reorder, or use ‚Üë ‚Üì)</div>
      <div class="sort-levels" id="sort-levels"></div>
      <button class="sort-add-btn" onclick="addSortLevel()">+ Add sort criterion</button>
    </div>

    <div class="filter-actions">
      <button class="btn-primary" onclick="applyFilters()">Search Surgeons</button>
      <button class="btn-ghost" onclick="resetAll()">Reset All</button>
      <span id="result-count"></span>
    </div>
  </div>
</section>

<main class="results-section">
  <div class="cards-grid" id="cards-grid"></div>
  <div class="empty" id="empty-state">
    <div class="empty-icon">üå∏</div>
    <h3>No surgeons match your filters</h3>
    <p>Try removing some filters or increasing your distance range.</p>
  </div>
</main>

<section class="disclaimer">
  <div class="disclaimer-box">
    <strong>‚ö†Ô∏è Important Disclaimer</strong>
    This directory is based on community recommendations, patient experiences, and publicly available information. It is <em>not</em> a medical endorsement or guarantee of outcomes. Review summaries reflect community feedback and may not represent current ratings. Always verify insurance coverage directly with the provider and consult a healthcare professional before making any medical decisions.
  </div>
</section>
</div>

<!-- ‚ïê‚ïê‚ïê NEWS PAGE ‚ïê‚ïê‚ïê -->
<div id="page-news" class="page">
<div class="news-page">
  <div class="news-intro">
    <h2>üì∞ Health News</h2>
    <p>Real articles from trusted health sources ‚Äî refreshed on demand.</p>
  </div>
  <div class="news-cats">
    <button class="cat-pill active" onclick="filterNews('all',this)">All</button>
    <button class="cat-pill" onclick="filterNews('endo',this)">ü©∫ Endometriosis</button>
    <button class="cat-pill" onclick="filterNews('womens',this)">üíú Women's Health</button>
    <button class="cat-pill" onclick="filterNews('fertility',this)">üå± Fertility</button>
    <button class="cat-pill" onclick="filterNews('medical',this)">üî¨ Medical Breakthroughs</button>
    <button class="cat-pill" onclick="filterNews('heartwarming',this)">üåü Heartwarming</button>
  </div>

  <div class="news-section" id="section-endo">
    <div class="news-section-header">
      <div class="news-section-icon" style="background:var(--nude4);">ü©∫</div>
      <h3>Endometriosis News</h3>
      <button class="news-refresh" onclick="loadSection('endo',this)"><span class="spin-icon">‚Üª</span> Refresh</button>
    </div>
    <div class="news-cards" id="cards-endo"></div>
  </div>

  <div class="news-section" id="section-womens">
    <div class="news-section-header">
      <div class="news-section-icon" style="background:var(--lav-lt);">üíú</div>
      <h3>Women's Health</h3>
      <button class="news-refresh" onclick="loadSection('womens',this)"><span class="spin-icon">‚Üª</span> Refresh</button>
    </div>
    <div class="news-cards" id="cards-womens"></div>
  </div>

  <div class="news-section" id="section-fertility">
    <div class="news-section-header">
      <div class="news-section-icon" style="background:var(--mint-lt);">üå±</div>
      <h3>Fertility Treatments</h3>
      <button class="news-refresh" onclick="loadSection('fertility',this)"><span class="spin-icon">‚Üª</span> Refresh</button>
    </div>
    <div class="news-cards" id="cards-fertility"></div>
  </div>

  <div class="news-section" id="section-medical">
    <div class="news-section-header">
      <div class="news-section-icon" style="background:#E8F4FF;">üî¨</div>
      <h3>Other Medical Breakthroughs</h3>
      <button class="news-refresh" onclick="loadSection('medical',this)"><span class="spin-icon">‚Üª</span> Refresh</button>
    </div>
    <div class="news-cards" id="cards-medical"></div>
  </div>

  <div class="news-section" id="section-heartwarming">
    <div class="news-section-header">
      <div class="news-section-icon" style="background:#FFF3E0;">üåü</div>
      <h3>Random Heartwarming Stories</h3>
      <button class="news-refresh" onclick="loadSection('heartwarming',this)"><span class="spin-icon">‚Üª</span> Refresh</button>
    </div>
    <div class="news-cards" id="cards-heartwarming"></div>
  </div>
</div>
</div>

<footer>
  <p>Surgeon data sourced from the <a href="https://www.efhou.org/find-a-doctor" target="_blank">Endometriosis Foundation of Houston</a> &amp; community recommendations.</p>
  <p style="margin-top:.5rem;">Built with üíú to help endo warriors find the care they deserve.</p>
</footer>

<script>
/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   DOCTOR DATA
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const DOCTORS = [
  {name:"Dr. Rachael Haverland",firstName:"Rachael",lastName:"Haverland",credentials:["MD"],org:"Endometriosis Center of Excellence",city:"Dallas",address:"Dallas, TX",lat:32.7767,lon:-96.7970,phone:null,website:"https://endoexcellencecenter.com/",specializations:["Excision Surgery","Fertility Preservation"],insurance:["Most major insurances (verify directly)"],accepting:true,notes:"Mayo Clinic-trained. Holistic, multidisciplinary approach. Limits use of GnRH agonists. Treats complex cases including ureteral and bladder involvement.",reviews:{highlight:"\"She is the doctor everyone deserves... I am celebrating 1 year post-surgery and am pain-free.\" Patients cite removal of endo from ureters, bladder, rectovaginal wall, and uterine artery.",stars:5,sources:[{name:"iCareBetter",url:"https://icarebetter.com/endometriosis/specialist/texas/excision-surgery/dr-rachael-haverland/"},{name:"Healthgrades",url:"https://www.healthgrades.com/search?what=Dr.+Rachael+Haverland"}]}},
  {name:"Dr. Kimberly Kho",firstName:"Kimberly",lastName:"Kho",credentials:["MD","FACOG"],org:"UT Southwestern Medical Center",city:"Dallas",address:"Dallas, TX",lat:32.8120,lon:-96.8385,phone:"214-645-3888",website:"https://utswmed.org/doctors/kimberly-kho/",specializations:["Excision Surgery","Robotic Surgery"],insurance:["UT Southwestern accepts many major plans"],accepting:true,notes:"Academic medical center with full multidisciplinary team: urology, colorectal surgery, and pain medicine.",reviews:{highlight:"Part of UT Southwestern's nationally recognized gynecology program. Patients praise thorough evaluations and access to a full care team for all aspects of endo management.",stars:5,sources:[{name:"UT Southwestern",url:"https://utswmed.org/doctors/kimberly-kho/"},{name:"Healthgrades",url:"https://www.healthgrades.com/search?what=Kimberly+Kho+Dallas"}]}},
  {name:"Dr. Anthony O'Connell",firstName:"Anthony",lastName:"O'Connell",credentials:["MD"],org:"Private Practice",city:"Dallas",address:"Dallas, TX",lat:32.7767,lon:-96.7970,phone:null,website:"https://www.doctoraj.com/",specializations:["Excision Surgery"],insurance:["Contact office for details"],accepting:true,notes:"Nationally recognized endometriosis specialist. Patients report extraordinary compassion and pain-free outcomes after years of suffering.",reviews:{highlight:"\"He is the most compassionate, empathetic, respectful, patient, and supportive doctor I have ever met. After just a month following my procedure, I AM PAIN FREE.\" ‚Äî Yelp patient",stars:5,sources:[{name:"Yelp",url:"https://www.yelp.com/search?find_desc=Dr+Anthony+O%27Connell&find_loc=Dallas%2C+TX"},{name:"Google",url:"https://www.google.com/search?q=Dr+Anthony+O%27Connell+endometriosis+Dallas"}]}},
  {name:"Dr. Tricia Shimer",firstName:"Tricia",lastName:"Shimer",credentials:["MD"],org:"Private Practice",city:"Dallas",address:"Dallas, TX",lat:32.7767,lon:-96.7970,phone:"(469) 364-3760",website:"https://tshimerobgyn.com/obgyn-services/gynecology/endometriosis/",specializations:["Excision Surgery"],insurance:["Contact office for details"],accepting:true,notes:"Practices radical resection. Expert in diagnosing and treating all stages of endometriosis including bowel and bladder involvement.",reviews:{highlight:"Patients commend her surgical skill and thoroughness. Known in DFW for her commitment to radical resection as the standard of care.",stars:4,sources:[{name:"Healthgrades",url:"https://www.healthgrades.com/search?what=Tricia+Shimer+Dallas"},{name:"Google Reviews",url:"https://www.google.com/search?q=Dr+Tricia+Shimer+OBGYN+Dallas+reviews"}]}},
  {name:"Dr. Quanita Crable",firstName:"Quanita",lastName:"Crable",credentials:["MD"],org:"Dr. Crable OB/GYN, P.A.",city:"Dallas",address:"Dallas, TX",lat:32.7767,lon:-96.7970,phone:"(469) 364-3764",website:"https://drcrableobgyn.com/",specializations:["Excision Surgery","Robotic Surgery"],insurance:["Contact office for details"],accepting:true,notes:"Board-certified gynecologic surgeon using da Vinci robotic system for minimally invasive resection. Same-day surgery available.",reviews:{highlight:"Patients appreciate her use of advanced robotic technology and caring bedside manner. Highly rated for clear communication about surgical options and post-op support.",stars:4,sources:[{name:"Healthgrades",url:"https://www.healthgrades.com/search?what=Quanita+Crable+Dallas"},{name:"Zocdoc",url:"https://www.zocdoc.com/search?q=endometriosis+excision+dallas"}]}},
  {name:"Dr. John A. Whitfield",firstName:"John",lastName:"Whitfield",credentials:["MD"],org:"Private Practice",city:"Fort Worth",address:"Fort Worth, TX",lat:32.7555,lon:-97.3308,phone:null,website:"https://www.johnwhitfieldmd.com/services/endometriosis",specializations:["Excision Surgery"],insurance:["Contact office for details"],accepting:true,notes:"Minimally invasive laparoscopic procedures. Most patients return home same day. Provides access to clinical trials.",reviews:{highlight:"Well-regarded for his thorough approach and willingness to discuss all options, including access to clinical trial opportunities unavailable elsewhere.",stars:4,sources:[{name:"Healthgrades",url:"https://www.healthgrades.com/search?what=John+Whitfield+Fort+Worth"},{name:"Google",url:"https://www.google.com/search?q=Dr+John+Whitfield+MD+Fort+Worth+endometriosis"}]}},
  {name:"Dr. Carolyn Quist",firstName:"Carolyn",lastName:"Quist",credentials:["MD"],org:"Private Practice",city:"Fort Worth",address:"Fort Worth, TX",lat:32.7555,lon:-97.3308,phone:null,website:"https://drcarolynquist.com/gynecological-care/endometriosis/",specializations:["Excision Surgery"],insurance:["Contact office for details"],accepting:true,notes:"Years of experience treating hundreds of women. Personalized approach to all stages of endometriosis.",reviews:{highlight:"Patients highlight her patience and willingness to listen to complex symptom histories often dismissed by other providers. Strong reputation in the Fort Worth gynecology community.",stars:4,sources:[{name:"Healthgrades",url:"https://www.healthgrades.com/search?what=Carolyn+Quist+Fort+Worth"},{name:"Google",url:"https://www.google.com/search?q=Dr+Carolyn+Quist+Fort+Worth+gynecologist"}]}},
  {name:"Dr. Xiaoming Guan",firstName:"Xiaoming",lastName:"Guan",credentials:["MD","PhD"],org:"Texas Children's / Baylor OB/GYN",city:"Houston",address:"Houston, TX",lat:29.7604,lon:-95.3698,phone:null,website:"https://www.texaschildrens.org/find-a-provider/xiaoming-guan-md-phd",specializations:["Excision Surgery","Robotic Surgery","Adolescent Endo"],insurance:["Most major plans accepted at Baylor"],accepting:true,notes:"Nationally recognized excision specialist. Researcher and educator in minimally invasive gynecologic surgery. Specializes in adolescent endometriosis.",reviews:{highlight:"Widely considered one of the leading endometriosis excision surgeons in the country. Patients travel from across the US. Praised for his research-informed surgical approach and attentive care.",stars:5,sources:[{name:"Texas Children's",url:"https://www.texaschildrens.org/find-a-provider/xiaoming-guan-md-phd"},{name:"Healthgrades",url:"https://www.healthgrades.com/search?what=Xiaoming+Guan+Houston"}]}},
  {name:"Dr. Tamisa Koythong",firstName:"Tamisa",lastName:"Koythong",credentials:["MD"],org:"Texas Children's / Baylor OB/GYN",city:"Houston",address:"Houston, TX",lat:29.7604,lon:-95.3698,phone:null,website:"https://www.texaschildrens.org/find-a-provider/tamisa-koythong-md",specializations:["Excision Surgery","Adolescent Endo"],insurance:["Most major plans accepted at Baylor"],accepting:true,notes:"Part of the Texas Children's multidisciplinary endometriosis program. Special focus on adolescent endo.",reviews:{highlight:"Part of one of the most respected endo teams in Texas. Patients praise her compassionate, thorough approach to both adolescent and adult endometriosis.",stars:5,sources:[{name:"Texas Children's",url:"https://www.texaschildrens.org/find-a-provider/tamisa-koythong-md"},{name:"Healthgrades",url:"https://www.healthgrades.com/search?what=Tamisa+Koythong+Houston"}]}},
  {name:"Dr. Joseph Nassif",firstName:"Joseph",lastName:"Nassif",credentials:["MD","MBA"],org:"Texas Children's / Baylor OB/GYN",city:"Houston",address:"Houston, TX",lat:29.7604,lon:-95.3698,phone:null,website:"https://www.texaschildrens.org/find-a-provider/joseph-nassif-md-mba",specializations:["Excision Surgery","Robotic Surgery"],insurance:["Most major plans accepted at Baylor"],accepting:true,notes:"Minimally invasive gynecologic surgeon at Texas Children's Pavilion for Women.",reviews:{highlight:"Known for meticulous surgical technique. Patients value his clear pre-surgical consultations and strong post-operative follow-up within the Texas Children's system.",stars:5,sources:[{name:"Texas Children's",url:"https://www.texaschildrens.org/find-a-provider/joseph-nassif-md-mba"}]}},
  {name:"Dr. Brooke Thigpen",firstName:"Brooke",lastName:"Thigpen",credentials:["MD","FACOG"],org:"Texas Children's / Baylor OB/GYN",city:"Houston",address:"Houston, TX",lat:29.7604,lon:-95.3698,phone:null,website:"https://www.texaschildrens.org/find-a-provider/brooke-thigpen-md-facog",specializations:["Excision Surgery"],insurance:["Most major plans accepted at Baylor"],accepting:true,notes:"Board-certified FACOG. Part of the renowned Texas Children's endo surgery team.",reviews:{highlight:"Highly regarded within Texas Children's endo center of excellence. Patients note her thoroughness and dedication to finding root-cause diagnoses.",stars:5,sources:[{name:"Texas Children's",url:"https://www.texaschildrens.org/find-a-provider/brooke-thigpen-md-facog"}]}},
  {name:"Dr. Mateo Leon Leon",firstName:"Mateo",lastName:"Leon",credentials:["MD"],org:"UT Physicians Women's Center",city:"Houston",address:"Greater Heights, Houston, TX",lat:29.7880,lon:-95.4200,phone:null,website:"https://www.utphysicians.com/provider/mateo-g-leon-leon/",specializations:["Excision Surgery"],insurance:["UT Physicians plans ‚Äî verify directly"],accepting:false,notes:"‚ö†Ô∏è Currently NOT accepting new patients. May be worth contacting for waitlist.",reviews:{highlight:"Highly respected excision surgeon. Patients report exceptional skill and thorough post-op care. Currently at capacity ‚Äî check for future openings.",stars:5,sources:[{name:"UT Physicians",url:"https://www.utphysicians.com/provider/mateo-g-leon-leon/"}]}},
  {name:"Dr. Devin Garza",firstName:"Devin",lastName:"Garza",credentials:["MD","FACOG"],org:"Texas Robotic Surgery for Women",city:"Austin",address:"Austin, TX",lat:30.2672,lon:-97.7431,phone:null,website:"https://texasroboticsurgeryforwomen.com/physicians/profile/Dr-Devin-M-Garza-MD-FACOG",specializations:["Excision Surgery","Robotic Surgery","Fertility Preservation"],insurance:["Contact office for details"],accepting:true,notes:"Specialist in robotic-assisted excision. Fellowship-trained in minimally invasive gynecologic surgery.",reviews:{highlight:"One of Austin's leading excision surgeons. Patients praise his robotic surgical precision and dedication to fertility preservation. Well-respected in the Texas endo community.",stars:5,sources:[{name:"Healthgrades",url:"https://www.healthgrades.com/search?what=Devin+Garza+Austin+TX"},{name:"Google",url:"https://www.google.com/search?q=Dr+Devin+Garza+endometriosis+Austin+Texas"}]}}
];

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SORT STATE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const SORT_FIELDS = [
  {value:"lastName",  label:"Last Name"},
  {value:"firstName", label:"First Name"},
  {value:"city",      label:"City"},
  {value:"credential",label:"Credential"},
  {value:"accepting", label:"Accepting (Yes first)"},
  {value:"stars",     label:"Review Rating"},
  {value:"distance",  label:"Distance (nearest first)"},
];

let sortLevels = [{field:"lastName", dir:"asc"}];

function renderSortLevels(){
  const container = document.getElementById("sort-levels");
  container.innerHTML = sortLevels.map((lv, i) => `
    <div class="sort-level" data-i="${i}">
      <span class="sort-level-num">${i+1}.</span>
      <select onchange="sortLevels[${i}].field=this.value; renderSortSummary()">
        ${SORT_FIELDS.map(f=>`<option value="${f.value}" ${lv.field===f.value?'selected':''}>${f.label}</option>`).join('')}
      </select>
      <button class="sort-dir-btn" onclick="toggleDir(${i})">${lv.dir==='asc'?'A ‚Üí Z':'Z ‚Üí A'}</button>
      <button class="sort-level-up" onclick="moveSortLevel(${i},-1)" title="Move up">‚Üë</button>
      <button class="sort-level-down" onclick="moveSortLevel(${i},1)" title="Move down">‚Üì</button>
      ${sortLevels.length>1?`<button class="sort-level-del" onclick="removeSortLevel(${i})" title="Remove">‚úï</button>`:''}
    </div>`).join('');
  renderSortSummary();
}

function toggleDir(i){
  sortLevels[i].dir = sortLevels[i].dir==='asc'?'desc':'asc';
  renderSortLevels();
}
function moveSortLevel(i, dir){
  const j = i + dir;
  if(j<0||j>=sortLevels.length) return;
  [sortLevels[i],sortLevels[j]] = [sortLevels[j],sortLevels[i]];
  renderSortLevels();
}
function removeSortLevel(i){
  sortLevels.splice(i,1);
  renderSortLevels();
}
function addSortLevel(){
  if(sortLevels.length>=5) return;
  sortLevels.push({field:"firstName", dir:"asc"});
  renderSortLevels();
}
function renderSortSummary(){
  const summaryEl = document.getElementById("sort-summary");
  if(!document.getElementById("sort-panel").classList.contains("visible")){summaryEl.textContent='';return;}
  summaryEl.textContent = sortLevels.map((l,i)=>{
    const f = SORT_FIELDS.find(x=>x.value===l.field);
    return `${i+1}. ${f?f.label:l.field} ${l.dir==='asc'?'‚Üë':'‚Üì'}`;
  }).join('  ');
}
function toggleSortPanel(){
  const p = document.getElementById("sort-panel");
  const btn = document.getElementById("sort-toggle");
  p.classList.toggle("visible");
  btn.classList.toggle("open");
  renderSortSummary();
}

function getSortValue(doc, field, userLat, userLon){
  switch(field){
    case 'lastName':   return (doc.lastName||'').toLowerCase();
    case 'firstName':  return (doc.firstName||'').toLowerCase();
    case 'city':       return (doc.city||'').toLowerCase();
    case 'credential': return (doc.credentials[0]||'').toLowerCase();
    case 'accepting':  return doc.accepting ? 0 : 1;
    case 'stars':      return doc.reviews ? -doc.reviews.stars : 0;
    case 'distance':
      if(userLat!==null && userLon!==null)
        return haversine(userLat,userLon,doc.lat,doc.lon);
      return 0;
    default: return 0;
  }
}

function sortDoctors(docs, userLat, userLon){
  return [...docs].sort((a, b) => {
    for(const lv of sortLevels){
      const av = getSortValue(a, lv.field, userLat, userLon);
      const bv = getSortValue(b, lv.field, userLat, userLon);
      if(av < bv) return lv.dir==='asc' ? -1 : 1;
      if(av > bv) return lv.dir==='asc' ? 1 : -1;
    }
    return 0;
  });
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   LOCATION / DISTANCE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let userLat = null, userLon = null;

function haversine(lat1,lon1,lat2,lon2){
  const R=3958.8, dLat=(lat2-lat1)*Math.PI/180, dLon=(lon2-lon1)*Math.PI/180;
  const a=Math.sin(dLat/2)**2+Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*Math.sin(dLon/2)**2;
  return R*2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));
}

function setStatus(msg,ok=true){
  const el=document.getElementById("zip-status");
  el.textContent=msg;
  el.style.color=ok?'var(--nude-dk)':'#B94A1A';
}

async function lookupZip(zip){
  const res = await fetch(`https://api.zippopotam.us/us/${zip}`);
  if(!res.ok) throw new Error('Not found');
  const d = await res.json();
  return {lat:parseFloat(d.places[0].latitude), lon:parseFloat(d.places[0].longitude), city:d.places[0]['place name']+', '+d.places[0]['state abbreviation']};
}

async function useMyLocation(){
  if(!navigator.geolocation){ setStatus('Geolocation not supported by your browser.',false); return; }
  setStatus('üìç Detecting location‚Ä¶');
  navigator.geolocation.getCurrentPosition(
    pos=>{
      userLat=pos.coords.latitude; userLon=pos.coords.longitude;
      document.getElementById("filter-zip").value='';
      setStatus(`‚úì Using your current location (${userLat.toFixed(4)}, ${userLon.toFixed(4)})`);
    },
    ()=>setStatus('Location access denied. Please enter a ZIP code instead.',false)
  );
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   FILTERS & RENDER
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function getInitials(n){return n.replace("Dr. ","").split(" ").map(w=>w[0]).slice(0,2).join("");}
function starRow(n){return '<span class="stars">'+'‚òÖ'.repeat(n)+'‚òÜ'.repeat(5-n)+'</span>';}

function renderCard(d,i,dist){
  const rev=d.reviews;
  const distBadge = dist!==null?`<span class="dist-badge">${Math.round(dist)} mi away</span>`:'';
  return `<div class="doctor-card" style="animation-delay:${(i%9)*0.05}s">
    <div class="card-header">
      <div class="avatar">${getInitials(d.name)}</div>
      <div>
        <div class="doctor-name">${d.name}</div>
        ${d.credentials.map(c=>`<span class="doctor-credential">${c}</span>`).join(" ")}
        <div class="doctor-org">${d.org}</div>
      </div>
    </div>
    <div class="info-row"><span class="icon">üìç</span><span>${d.address}${distBadge}</span></div>
    ${d.phone?`<div class="info-row"><span class="icon">üìû</span><a href="tel:${d.phone}" style="color:var(--nude-dk);text-decoration:none;font-size:.84rem;">${d.phone}</a></div>`:''}
    <div class="info-row"><span class="icon">üí°</span><span>${d.notes}</span></div>
    <div class="tags">${d.specializations.map(s=>`<span class="tag ${s==="Robotic Surgery"?"mint":s==="Fertility Preservation"?"lav":""}">${s}</span>`).join('')}</div>
    <div class="info-row" style="font-size:.78rem;"><span class="icon">üè•</span><span>${d.insurance[0]}</span></div>
    ${rev?`<div class="review-block">
      <div class="review-label">Patient Reviews ${starRow(rev.stars)}</div>
      <div class="review-text">${rev.highlight}</div>
      <div class="review-sources">${rev.sources.map(s=>`<a class="review-link" href="${s.url}" target="_blank" rel="noopener">${s.name} ‚Üó</a>`).join('')}</div>
    </div>`:''}
    <div class="card-footer">
      ${d.website?`<a class="btn-site" href="${d.website}" target="_blank" rel="noopener">Visit Website ‚Üó</a>`:''}
      <span class="accepting-badge ${d.accepting?'':'no'}">${d.accepting?"‚úÖ Accepting":"‚è≥ Not Accepting"}</span>
    </div>
  </div>`;
}

async function applyFilters(){
  // Resolve zip if entered
  const zipVal = document.getElementById("filter-zip").value.trim();
  if(zipVal.length===5 && !/\D/.test(zipVal)){
    try{
      setStatus('Looking up ZIP code‚Ä¶');
      const loc = await lookupZip(zipVal);
      userLat=loc.lat; userLon=loc.lon;
      setStatus(`‚úì Showing results near ${loc.city} (${zipVal})`);
    } catch(e){
      setStatus('ZIP code not found. Try another.',false);
      userLat=null; userLon=null;
    }
  } else if(!zipVal){
    if(!document.getElementById("zip-status").textContent.startsWith('‚úì Using your current'))
      setStatus('');
  }

  const city      = document.getElementById("filter-city").value;
  const cred      = document.getElementById("filter-cred").value;
  const spec      = document.getElementById("filter-spec").value;
  const acc       = document.getElementById("filter-accepting").value;
  const maxDist   = parseFloat(document.getElementById("filter-dist").value)||null;

  // Build distances map
  const distMap = {};
  if(userLat!==null && userLon!==null){
    DOCTORS.forEach(d=>{ distMap[d.name]=haversine(userLat,userLon,d.lat,d.lon); });
  }

  let filtered = DOCTORS.filter(d=>{
    if(city && d.city!==city) return false;
    if(cred && !d.credentials.includes(cred)) return false;
    if(spec && !d.specializations.includes(spec)) return false;
    if(acc==="true"  && !d.accepting) return false;
    if(acc==="false" &&  d.accepting) return false;
    if(maxDist!==null && userLat!==null){
      if((distMap[d.name]||9999) > maxDist) return false;
    }
    return true;
  });

  // Sort
  filtered = sortDoctors(filtered, userLat, userLon);

  const grid=document.getElementById("cards-grid");
  const empty=document.getElementById("empty-state");
  const count=document.getElementById("result-count");
  if(!filtered.length){
    grid.innerHTML=''; empty.style.display='block';
    count.textContent='0 results';
  } else {
    empty.style.display='none';
    grid.innerHTML=filtered.map((d,i)=>renderCard(d,i,distMap[d.name]!==undefined?distMap[d.name]:null)).join('');
    count.textContent=`${filtered.length} surgeon${filtered.length>1?'s':''} found`;
  }
}

function resetAll(){
  ["filter-city","filter-cred","filter-spec","filter-accepting","filter-dist"].forEach(id=>document.getElementById(id).value="");
  document.getElementById("filter-zip").value="";
  document.getElementById("zip-status").textContent="";
  userLat=null; userLon=null;
  sortLevels=[{field:"lastName",dir:"asc"}];
  renderSortLevels();
  applyFilters();
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   TAB SWITCHING
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let newsLoaded=false;
function switchTab(tab,btn){
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.querySelectorAll(".tab-btn").forEach(b=>b.classList.remove("active"));
  document.getElementById("page-"+tab).classList.add("active");
  btn.classList.add("active");
  if(tab==="news"&&!newsLoaded){loadAllNews();newsLoaded=true;}
}
function filterNews(cat,btn){
  document.querySelectorAll(".cat-pill").forEach(p=>p.classList.remove("active"));
  btn.classList.add("active");
  ["endo","womens","fertility","medical","heartwarming"].forEach(s=>{
    document.getElementById("section-"+s).style.display=(cat==="all"||cat===s)?'block':'none';
  });
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   NEWS ‚Äî Google News RSS via rss2json
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const NEWS_FEEDS = {
  endo:        {url:"https://news.google.com/rss/search?q=endometriosis+excision+surgery+treatment&hl=en-US&gl=US&ceid=US:en", emoji:"ü©∫"},
  womens:      {url:"https://news.google.com/rss/search?q=women+gynecology+health+pelvic+pain&hl=en-US&gl=US&ceid=US:en",     emoji:"üíú"},
  fertility:   {url:"https://news.google.com/rss/search?q=IVF+fertility+treatment+reproductive&hl=en-US&gl=US&ceid=US:en",    emoji:"üå±"},
  medical:     {url:"https://news.google.com/rss/search?q=medical+breakthrough+surgery+innovation&hl=en-US&gl=US&ceid=US:en", emoji:"üî¨"},
  heartwarming:{url:"https://news.google.com/rss/search?q=heartwarming+patient+recovery+medical+kindness&hl=en-US&gl=US&ceid=US:en", emoji:"üåü"},
};
const RSS2JSON_API = "https://api.rss2json.com/v1/api.json?api_key=&count=5&rss_url=";

function stripTags(s){ return (s||'').replace(/<[^>]+>/g,'').replace(/&amp;/g,'&').replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/&quot;/g,'"').replace(/&#39;/g,"'").trim().slice(0,240)+(s&&s.length>240?'‚Ä¶':''); }
function fmtDate(s){ try{return new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});}catch(e){return s||'';} }

function showSkel(id){
  document.getElementById(id).innerHTML=[1,2,3,4,5].map(()=>`
    <div class="skel-card">
      <div class="skeleton" style="width:80%;height:15px;margin-bottom:.7rem;"></div>
      <div class="skeleton" style="width:95%;height:10px;"></div>
      <div class="skeleton" style="width:75%;height:10px;"></div>
      <div class="skeleton" style="width:40%;height:10px;margin-top:.6rem;"></div>
    </div>`).join('');
}

function renderItems(cid, items, emoji){
  if(!items||!items.length){
    document.getElementById(cid).innerHTML=`<div class="news-card"><div class="news-card-emoji">üì≠</div><div class="news-card-body"><div class="news-card-title">No articles returned</div><div class="news-card-summary">The feed returned no items. Try refreshing in a moment.</div></div></div>`;
    return;
  }
  document.getElementById(cid).innerHTML=items.map((item,i)=>`
    <div class="news-card" style="animation-delay:${i*0.06}s">
      <div class="news-card-emoji">${emoji}</div>
      <div class="news-card-body">
        <div class="news-card-title"><a href="${item.link||'#'}" target="_blank" rel="noopener">${item.title||'Untitled'}</a></div>
        <div class="news-card-summary">${stripTags(item.description||item.summary||'No description available.')}</div>
        <div class="news-card-meta">
          <span class="news-card-source">${(item.author||item.source_name||'Google News').split(',')[0].slice(0,40)}</span>
          <span class="news-card-date">${fmtDate(item.pubDate)}</span>
        </div>
      </div>
    </div>`).join('');
}

async function loadSection(key, btnEl){
  const btn = btnEl || document.querySelector(`#section-${key} .news-refresh`);
  if(btn) btn.classList.add("spinning");
  const cid="cards-"+key;
  showSkel(cid);

  const feed = NEWS_FEEDS[key];
  try{
    const url = RSS2JSON_API + encodeURIComponent(feed.url);
    const res = await fetch(url, {mode:'cors'});
    const data = await res.json();
    if(data.status==='ok' && data.items && data.items.length){
      renderItems(cid, data.items, feed.emoji);
    } else {
      // rss2json failed ‚Äî try cors.sh proxy
      const proxy="https://corsproxy.io/?"+encodeURIComponent(feed.url);
      const res2=await fetch(proxy);
      const xml=await res2.text();
      const items=parseRSS(xml);
      renderItems(cid, items, feed.emoji);
    }
  } catch(e){
    // Last resort: attempt corsproxy.io
    try{
      const proxy="https://corsproxy.io/?"+encodeURIComponent(feed.url);
      const res=await fetch(proxy);
      const xml=await res.text();
      const items=parseRSS(xml);
      renderItems(cid, items, feed.emoji);
    } catch(e2){
      document.getElementById(cid).innerHTML=`
        <div class="news-card">
          <div class="news-card-emoji">‚ö†Ô∏è</div>
          <div class="news-card-body">
            <div class="news-card-title">Articles unavailable right now</div>
            <div class="news-card-summary">Both news sources are temporarily unreachable. Please click Refresh to try again, or check your network connection.</div>
          </div>
        </div>`;
    }
  } finally{
    if(btn) btn.classList.remove("spinning");
  }
}

function parseRSS(xml){
  const parser=new DOMParser();
  const doc=parser.parseFromString(xml,'text/xml');
  const items=[...doc.querySelectorAll('item')].slice(0,5);
  return items.map(item=>({
    title:       item.querySelector('title')?.textContent||'',
    link:        item.querySelector('link')?.textContent||'#',
    description: item.querySelector('description')?.textContent||'',
    pubDate:     item.querySelector('pubDate')?.textContent||'',
    author:      item.querySelector('source')?.textContent||item.querySelector('author')?.textContent||'Google News',
  }));
}

function loadAllNews(){
  Object.keys(NEWS_FEEDS).forEach(k=>loadSection(k));
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   INIT
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
renderSortLevels();
applyFilters();
</script>
</body>
</html>
